<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>

</head>

<body>

<h1>Overall System Architecture</h1>

<p><a href="https://github.com/softsky/people-match-ai">PeopleMatchAI</a> designed for fast determination of purchase capabilities using person profile.</p>

<p>Persons profile looks like this:</p>

<p>``` javascript
{
    "<em>id": {
        "$oid": "58ea248524dce09f41209710"
    },
    "searchResult": [
        {
            "otherEmails": [],
            "country": "United States",
            "source": "PeopleData",
            "lastUpdated": "2016-09-26T16:54:28Z",
            "id": "AVdO</em>GcbPKMaPmPU7jEY",
            "state": "arizona",
            "probability": 1,
            "query": "MANUAL_REQUEST",
            "firstName": "John",
            "phone": "1-520-247-9050",
            "lastName": "Soukup",
            "stateAbbr": "AZ",
            "activity": null,
            "gender": "M",
            "city": "Tucson",
            "result": {
                "resultStatus": "OK",
            },
            "term": "[1]",
            "mergedIdentities": [
                {
                    "source": "EX",
                    "datetime": "2016-06-23T00:00:00Z",
                    "lname": "Soukup",
                    "class": "com.selerityfinancial.person.peopledata.dto.PeopleDataPerson",
                    "email": "c.l.soukup@comcast.net",
                    "fname": "John",
                    "address": {
                        "zip": "85749",
                        "city": "Tucson",
                        "streetAddress": "9352 E Vallarta Trl",
                        "state": "AZ",
                        "class": "com.selerityfinancial.person.peopledata.dto.PeopleDataAddress"
                    },
                    "ip": [
                        "71.226.126.234"
                    ],
                    "phone": [
                        "1-520-247-9050"
                    ],
                },
    ]}
]}</p>

<p>```</p>

<h3>Comments on Person Profile</h3>

<ul>
<li>mergedDetails section contains the array of profile data collected from different places</li>
<li>it may contain duplicated</li>
<li>it may contain empty records</li>
</ul>

<p>System support over 240 million profiles of US citizens.</p>

<h2>Requirements</h2>

<ul>
<li>Scalability:
System architecture should be scalable and high performant (in terms of traininig and evaluation).</li>
<li>High Performance:
Since there will be multiple concurrent searches, and every search will take valuable amount of time, previous results should be cached.
Cache will be wiped every time main database of people profiles is updated.
We should monitor for most frequent searches and cache results only for them, while searches performed one or few times won't be cached to save memory and drive space</li>
</ul>

<h2>Other requirements:</h2>

<ul>
<li>Model, once trained for some search purpose could be easily distributed between evaluation nodes I'd suggest using of dockerized containers (some for training and other for realtime evaluation).</li>
</ul>

<p><a href="Resources/uml/SystemDeployment.uml">System Deployment UML Diagram</a>
<img src="Resources/SystemDeployment.uml.png" alt="Deployment Diagram" />
Basically system architecture will look like that:</p>

<h2>Training Box</h2>

<p>Training Box performs following operations:</p>

<ul>
<li>New Profiles Crawling</li>
<li>Itentity Match and Profile Merging</li>
<li>Profile Enhancement</li>
<li>Model training</li>
<li>Model distribution across Evaluation Nodes</li>
</ul>

<p>Training Box use Google <em>Tensor Flow</em> as AI</p>

<p>Old and new profiles form <code>Train Corpus</code> which is used by <em>TensorFlow</em> to create new <code>Models</code></p>

<h4>Deployment</h4>

<p><a href="Resources/uml/TrainigBoxDeployment.uml">Training Box Deployment UML Diagram</a>
<img src="Resources/TrainingBoxDeployment.uml.png" alt="Training Box" /></p>

<p>Operaional Sequence is shown here:</p>

<h4>Sequence</h4>

<p><a href="Resources/uml/Resources/uml/TrainSequence.uml">Training Sequence UML Diagram</a>
<img src="Resources/TrainSequence.uml.png" alt="Training" /></p>

<h4>Identity Match</h4>

<p>Crawling is performed over multiple resources. We need the way to properly match identities and merge their profiles.
We might use email or phone as unique intentifier, since name won't always work.
Since some resources might not return unique identifier we use AI comparing fiels.</p>

<p><a href="Resources/uml/IdentityMatchSequece.uml">Identity Match Sequence</a>
<img src="Resources/IdentityMatchSequence.uml.png" alt="Identity Match Sequence Diagram" /></p>

<p>Training box will be used most of the time to train all special purposes models using probably slightly modified Inception v3 alorigthm. 
Traning it from scratch is time consuming operation, however once all special purpose algos and models are trained it could be put down to save hosting cost and be running only once it's needed next time 
for next alorithm/model train. We will apparently have several purposes (so models and algos) depending on type of information consumers need to receive as the result of their searches.</p>

<h2>Evaluation Box</h2>

<p>Evaluation boxes will also be used all the time, they will serve large datasets searching for appropriate data according to consumer's search.</p>

<p><a href="Resources/uml/EvaluationBoxDeployment.uml">Evaluation Box Deployment UML Diagram</a>
<img src="Resources/EvaluationBoxDeployment.uml.png" alt="Evalutaion Box" /></p>

<h2>System Requirements</h2>

<h3>System hardware requirements</h3>

<p>Here are system software requirements </p>

<ul>
<li><p>Training box:
<em>is distributed among 5 high performant 128Gb/10TB 6</em>12 Nvidia GPU machines*</p></li>
<li><p>Evaluation boxes: 
<em>depends on number of concurrent searches and overall database size and complexity (in terms of fields in persons profiles)</em></p></li>
</ul>

<h3>System Software Requirements</h3>

<p>Here are system software requirements </p>

<ul>
<li>OS: Amazon/Ubuntu Linux with recent 4.x kernel</li>
<li>DB: MongoDB 3.3+</li>
<li>AI: Google TenserFlow 1.x</li>
<li>JVM: v1.8 or higher</li>
</ul>

<h3>How to run</h3>

<p>From the project directory</p>

<p><code>shell
docker-compose up
docker exec -ti peoplematchai_master_1 bash
spb run
</code></p>

</body>
</html>
